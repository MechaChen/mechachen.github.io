"use strict";(self.webpackChunkbenson_doc=self.webpackChunkbenson_doc||[]).push([[9493],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>k});var r=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var i=r.createContext({}),c=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},d=function(e){var t=c(e.components);return r.createElement(i.Provider,{value:t},e.children)},s="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,l=e.mdxType,o=e.originalType,i=e.parentName,d=u(e,["components","mdxType","originalType","parentName"]),s=c(n),m=l,k=s["".concat(i,".").concat(m)]||s[m]||p[m]||o;return n?r.createElement(k,a(a({ref:t},d),{},{components:n})):r.createElement(k,a({ref:t},d))}));function k(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=n.length,a=new Array(o);a[0]=m;var u={};for(var i in t)hasOwnProperty.call(t,i)&&(u[i]=t[i]);u.originalType=e,u[s]="string"==typeof e?e:l,a[1]=u;for(var c=2;c<o;c++)a[c]=n[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1997:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>u,toc:()=>c});var r=n(7462),l=(n(7294),n(3905));const o={sidebar_label:"[Implement] \u5be6\u4f5c react-redux",title:"[Implement] \u5be6\u4f5c react-reudx",tags:["Implement","react-redux","Observer pattern"]},a=void 0,u={unversionedId:"Plan/implement-react-redux",id:"Plan/implement-react-redux",title:"[Implement] \u5be6\u4f5c react-reudx",description:"https://github.com/MechaChen/simple-react-redux",source:"@site/docs/Plan/implement-react-redux.mdx",sourceDirName:"Plan",slug:"/Plan/implement-react-redux",permalink:"/zh-tw/docs/Plan/implement-react-redux",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Plan/implement-react-redux.mdx",tags:[{label:"Implement",permalink:"/zh-tw/docs/tags/implement"},{label:"react-redux",permalink:"/zh-tw/docs/tags/react-redux"},{label:"Observer pattern",permalink:"/zh-tw/docs/tags/observer-pattern"}],version:"current",lastUpdatedAt:1707466577,formattedLastUpdatedAt:"2024\u5e742\u67089\u65e5",frontMatter:{sidebar_label:"[Implement] \u5be6\u4f5c react-redux",title:"[Implement] \u5be6\u4f5c react-reudx",tags:["Implement","react-redux","Observer pattern"]},sidebar:"tutorialSidebar",previous:{title:"[Catelog] \u5be6\u4f5c library \u76ee\u9304",permalink:"/zh-tw/docs/Plan/implementation-catlog"},next:{title:"[Implement] \u5be6\u4f5c Redux",permalink:"/zh-tw/docs/Plan/implement-redux"}},i={},c=[{value:"\u524d\u8a00\uff1aContext \u7684\u6548\u80fd\u554f\u984c",id:"\u524d\u8a00context-\u7684\u6548\u80fd\u554f\u984c",level:2},{value:"react-redux \u65b9\u6848\uff1a\u78ba\u5b9a\u76e3\u807d\u503c\u6709\u8b8a\u5f8c\u624d re-render",id:"react-redux-\u65b9\u6848\u78ba\u5b9a\u76e3\u807d\u503c\u6709\u8b8a\u5f8c\u624d-re-render",level:2},{value:"\u5be6\u73fe <code>Provider</code>",id:"\u5be6\u73fe-provider",level:3},{value:"\u5be6\u73fe <code>useDispatch</code>",id:"\u5be6\u73fe-usedispatch",level:3},{value:"\u5be6\u73fe <code>useSelector</code>",id:"\u5be6\u73fe-useselector",level:3},{value:"simple <code>react-redux</code> \u6e2c\u8a66",id:"simple-react-redux-\u6e2c\u8a66",level:2},{value:"\u7d50\u8ad6",id:"\u7d50\u8ad6",level:2},{value:"\u53c3\u8003\u8cc7\u6e90",id:"\u53c3\u8003\u8cc7\u6e90",level:3}],d={toc:c},s="wrapper";function p(e){let{components:t,...n}=e;return(0,l.kt)(s,(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("admonition",{title:"\u539f\u59cb\u78bc\u5728\u9019\uff0c\u6b61\u8fce\u4f86\u73a9\uff5e",type:"info"},(0,l.kt)("p",{parentName:"admonition"},(0,l.kt)("a",{parentName:"p",href:"https://github.com/MechaChen/simple-react-redux"},"https://github.com/MechaChen/simple-react-redux"))),(0,l.kt)("h2",{id:"\u524d\u8a00context-\u7684\u6548\u80fd\u554f\u984c"},"\u524d\u8a00\uff1aContext \u7684\u6548\u80fd\u554f\u984c"),(0,l.kt)("p",null,"\u904e\u53bb\u76f4\u63a5\u4f7f\u7528 Context\uff0c\u6703\u9020\u6210 Child component \u4e00\u76f4 re-render\uff0c\u5c31\u7b97\u8a72 component \u5be6\u969b\u7528\u5230\u7684\u503c\u6c92\u6709\u8b8a\u66f4\uff0c\u9084\u662f\u6703\u9020\u6210 re-render"),(0,l.kt)("br",null),(0,l.kt)("p",null,"\u4ee5\u4e00\u500b\u6709 3 \u500b Counters\uff0c\u90fd\u5305\u5728 Context \u5e95\u4e0b\u7684\u60c5\u5883\u70ba\u4f8b\uff0cCounters \u689d\u4ef6\u5982\u4e0b"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"2 \u500b Counters \u7684\u72c0\u614b\u4f7f\u7528 Context \u63d0\u4f9b\u7684 count1, count2 state"),(0,l.kt)("li",{parentName:"ul"},"1 \u500b Counter \u6709\u81ea\u5df1\u7684 state")),(0,l.kt)("br",null),(0,l.kt)("figure",null,(0,l.kt)("img",{src:"/img/counters-in-context.png",alt:"Counters in Context"})),(0,l.kt)("br",null),(0,l.kt)("p",null,"\u82e5\u6211\u5011\u4f86\u5be6\u969b\u64cd\u4f5c\u7684\u8a71\uff0c\u5c31\u6703\u6709\u4ee5\u4e0b\u7684\u6548\u679c"),(0,l.kt)("iframe",{width:"720",height:"405",src:"https://www.youtube.com/embed/ph8fLb2mE_Y?si=DNC1FN8zcREhUczH",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("p",null,"\u6211\u5011\u5c31\u6703\u767c\u73fe"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u7576\u6211\u5c0d Context \u4e2d\u7684 count1 \u505a\u52a0\u6e1b\u6642\uff0c\u6574\u500b Context component, Counter1, Counter2 \u90fd\u6703 re-render"),(0,l.kt)("li",{parentName:"ol"},"count2 \u540c\u4e0a")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("p",null,"\u6211\u5011\u5148\u4f86\u770b\u770b\u7a0b\u5f0f\u78bc\u7247\u6bb5\uff0c\u4f86\u4e86\u89e3\u70ba\u4ec0\u9ebc\u6703\u9019\u6a23"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"const [count1, setCount1] = useState(0);\nconst [count2, setCount2] = useState(0);\n\n// \u7576 count1, count2 \u6709\u8b8a\u52d5\u6642\uff0c useMemo \u5c31\u6703\u7522\u751f\u65b0\u7684 contextValue\n// \u9020\u6210\u6709\u65b0\u7684 reference\uff0c\u4f7f ContextCounter1, ContextCounter2 re-render\nconst contextValue = useMemo(\n  () => ({\n    count1,\n    count2,\n    setCount1,\n    setCount2,\n  }),\n  [count1, count2, setCount1, setCount2]\n);\n\nreturn (\n  <div>\n    <CounterContext.Provider value={contextValue}>\n      <h2>In Context</h2>\n      <ContextCounter1 />\n      <ContextCounter2 />\n      <SelfCounter />\n    </CounterContext.Provider>\n  </div>\n);\n")),(0,l.kt)("br",null),(0,l.kt)("p",null,"\u4e3b\u8981\u662f\u56e0\u70ba\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"useContext(context)")," \u6642\uff0c\u9084\u662f\u6703\u53d6\u5230\u6574\u500b context object\uff0c\u7576 context object \u6709\u503c\u8b8a\u52d5\u6642\uff0c\u5c31\u6703 re-render\uff0c\u9032\u800c create \u4e00\u500b\u65b0\u7684 context object\uff0c\u5c31\u7b97\u7528\u4e86 ",(0,l.kt)("inlineCode",{parentName:"p"},"useMemo")," \u4e5f\u4e00\u6a23"),(0,l.kt)("br",null),(0,l.kt)("p",null,"\u8a73\u7d30\u7684\u904e\u7a0b\u5982\u4e0b\uff1a"),(0,l.kt)("mermaid",{value:'flowchart TB\nsetCount1 --\x3e id2["count 1 \u8b8a\u52d5"]\nid2 --\x3e no-Memo\nid2 --\x3e useMemo\n\nsubgraph no-Memo\n\tdirection TB\n\tid31["Parent component re-render"] --\x3e id41["component \u7522\u751f<br/>\u4e00\u500b\u65b0\u7684 context object"]\n\tid41 --\x3e id51["context \u7684 reference \u8b8a\u4e86"]\n\tid51 --\x3e id61["\u4f7f\u7528\u8a72 context <br />\u7684 component re-render"]\nend\n\nsubgraph useMemo\n\tdirection TB\n\tid32["Parent component re-render"] --\x3e id42["useMemo \u53bb\u770b\u770b\u76e3\u807d\u7684 state <br/>\u6709\u6c92\u6709\u5728\u9019\u6b21 re-render \u8b8a\u52d5"]\n\tid42 --\x3e id52["\u767c\u73fe\u6709\u8b8a\u52d5\uff0cuseMemo \u7522\u751f<br/>\u4e00\u500b\u65b0\u7684 context object"]\n\tid52 --\x3e id62["useContext \u7684 component <br />\u5075\u6e2c\u5230\u65b0\u7684 context object reference"]\n\tid62 --\x3e id72["\u56e0\u70ba context \u7684 reference \u8b8a\u4e86\uff0c<br />\u4f7f\u7528\u8a72 context \u7684 component re-render"]\nend'}),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("p",null,"\u6539\u8b8a context \u7684\u67d0\u4e9b state \uff0c\u537b\u9020\u6210\u5176\u4ed6\u6c92\u6709\u7528\u9019\u500b state\uff0c\u4f46\u6709\u7528\u5230 Conext \u7684 components \u90fd\u6703 re-render\uff0c\u9019\u4e0d\u662f\u6211\u5011\u60f3\u8981\u7684\u6548\u679c\uff0c\n\u5f9e\u4e0a\u8ff0\u7684\u89e3\u8aaa\uff0c\u6211\u5011\u4e5f\u77e5\u9053\u539f\u56e0\u4e86\uff0c\u4e3b\u8981\u5c31\u662f\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},"\u6574\u500b context object \u7684\u53c3\u8003\u6703\u4e00\u76f4\u8b8a\u52d5\uff0c\u9020\u6210\u6240\u6709\u4f7f\u7528 context \u7684 component \u4e00\u76f4 re-render")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("strong",{parentName:"li"},"\u7121\u6cd5\u5075\u6e2c\u7279\u5b9a\u7684 context value \u662f\u5426\u6709\u8b8a\u52d5\uff0c\u9032\u800c\u53bb\u6c7a\u5b9a\u662f\u5426\u8981 re-render"))),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("p",null,"\u70ba\u4e86\u89e3\u6c7a\u9019\u500b\u554f\u984c\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"react-redux")," \u5c31\u5728\u5f15\u7528 React \u7684 Context API \u6642\u505a\u4e86\u4e00\u4e9b\u512a\u5316\u5982\u4e0b"),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("h2",{id:"react-redux-\u65b9\u6848\u78ba\u5b9a\u76e3\u807d\u503c\u6709\u8b8a\u5f8c\u624d-re-render"},"react-redux \u65b9\u6848\uff1a\u78ba\u5b9a\u76e3\u807d\u503c\u6709\u8b8a\u5f8c\u624d re-render"),(0,l.kt)("p",null,"\u4ee5\u4e0b\u6211\u5011\u5c31\u4f86\u770b\u770b\u600e\u9ebc\u6642\u505a\u4e00\u500b\u7c21\u55ae\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"react-redux"),"\uff0c\u4f86\u907f\u514d Context \u7684\u6548\u80fd\u554f\u984c\uff0c\u6211\u5011\u4e3b\u8981\u8981\u5efa\u7acb 3 \u500b api\uff0c\u5206\u5225\u662f\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"Provider")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"useDispatch")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"useSelector"))),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("h3",{id:"\u5be6\u73fe-provider"},"\u5be6\u73fe ",(0,l.kt)("inlineCode",{parentName:"h3"},"Provider")),(0,l.kt)("p",null,"\u4e3b\u8981\u5c31\u662f\u7528 Redux store \u7576\u4f5c Context \u7684 value"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5efa\u7acb\u4e00\u500b ReduxContext"),(0,l.kt)("li",{parentName:"ol"},"\u5efa\u7acb\u4e00\u500b HOC \u7a31\u4f5c ",(0,l.kt)("inlineCode",{parentName:"li"},"Provider"),"\uff0c\u4e26\u63a5\u6536\u4e00\u500b developer \u50b3\u5165\u7684 store\uff0c\u585e\u9032 ReduxContext \u4e2d\uff0c\u4f5c\u70ba Redux Context \u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"value"))),(0,l.kt)("br",null),(0,l.kt)("p",null,"Context"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"import React, { useContext } from 'react';\n\nconst ReduxContext = createContext(null);\n\nfunction useReduxContext() {\n  const store = useContext(ReduxContext);\n\n  if (!store) {\n    throw new Error('could not find react-redux context value; please ensure the component is wrapped in a <Provider>')\n  }\n\n  return store;\n}\n")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("p",null,"Provider"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"export function Provider({ store, children }) {\n  return (\n    <ReduxContext.Provider value={store}>\n      {children}\n    </ReduxContext.Provider>\n  );\n}\n")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("h3",{id:"\u5be6\u73fe-usedispatch"},"\u5be6\u73fe ",(0,l.kt)("inlineCode",{parentName:"h3"},"useDispatch")),(0,l.kt)("p",null,"\u53d6\u5f97 ReduxContext \u88e1\u9762\u7684 store\uff0c\u4e26\u56de\u50b3 ",(0,l.kt)("inlineCode",{parentName:"p"},"store.dispatch")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"export function useDispatch() {\n  const store = useReduxContext();\n  return store.dispatch;\n}\n")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("h3",{id:"\u5be6\u73fe-useselector"},"\u5be6\u73fe ",(0,l.kt)("inlineCode",{parentName:"h3"},"useSelector")),(0,l.kt)("p",null,"react-reudx \u7684\u91cd\u982d\u6232\uff0c\u5be6\u73fe ",(0,l.kt)("inlineCode",{parentName:"p"},"useSelector")," \u904e\u7a0b\uff0c\u4e3b\u8981\u662f\u5229\u7528"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5f9e ",(0,l.kt)("inlineCode",{parentName:"li"},"useReduxContext")," \u53d6\u5f97 store\uff0c\u56e0\u70ba store \u662f\u56fa\u5b9a\u7684 reference\uff0c\u6545\u4e0d\u6703\u9020\u6210 re-render"),(0,l.kt)("li",{parentName:"ol"},"\u5229\u7528 selector \u9078\u53d6 store \u4e2d\u76e3\u807d\u7684 state \u90e8\u5206"),(0,l.kt)("li",{parentName:"ol"},"\u5229\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"useRef")," \u8a18\u4f4f\u4e0a\u6b21\u76e3\u807d\u7684 state\uff0c\u4e26\u7528\u7576\u4f5c\u662f\u5426\u8981 re-render \u7684\u57fa\u6e96")),(0,l.kt)("br",null),(0,l.kt)("p",null,"\u4e14\u63a5\u6536\u5169\u500b\u53c3\u6578"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"selector"),"\uff1a\u5b9a\u7fa9\u5982\u4f55\u5f9e store state \u53d6\u503c\uff0c\u4f8b\u5982 ",(0,l.kt)("inlineCode",{parentName:"li"},"(state) => state.count")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"equalityFn"),"\uff1a\u5b9a\u7fa9 selector \u9078\u53d6\u7684 store state \u90e8\u5206\u662f\u5426\u6709\u6539\u8b8a")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("p",null,"\u8a73\u7d30\u6d41\u7a0b\u5982\u4e0b\uff1a"),(0,l.kt)("mermaid",{value:'flowchart TB\nid1["1. \u5f9e Context \u53d6\u5f97 store"] -- "store \u56e0\u70ba reference \u56fa\u5b9a\u7684\uff0c\u5c31\u7b97\u5167\u90e8\u7684 state \u88ab\u6539\u8b8a\uff0c<br/>reference \u9084\u662f\u4e00\u6a23\uff0c\u6545\u4e0d\u6703\u9020\u6210 component re-render" --\x3e id3["2. \u5f9e store \u4e2d\u53d6\u5f97 state"]\nid3 --\x3e id4["3. \u5224\u65b7\u76e3\u807d\u7684 state \u8ddf\u4e0a\u6b21 state \u7684\u503c\u6709\u6c92\u6709\u5dee\u7570"]\nid4 --\x3e id5["4. \u5982\u679c\u6709\u5dee\u7570\uff0c\u5f37\u5236 re-redner component"]\nid5 --\x3e id6["5. \u5c07 step 1 ~ step 4 \u7684\u884c\u70ba\u8a3b\u518a\u5230 redux \u88e1"]'}),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("p",null,"\u7a0b\u5f0f\u78bc\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-tsx"},"const defaultEqualityFn = (prevState, curState) => prevState === curState;\n\nexport function useSelector(selector, equalityFn = defaultEqualityFn) {\n  // 1. \u5148\u53d6\u51fa Redux store\n  // 2. \u7528 selector \u9078\u53d6 initialState \u76e3\u807d\u7684\u90e8\u5206\uff0c\u653e\u5230 ref \u88e1\u4f5c\u70ba\u521d\u59cb\u503c\n  // 3. \u770b\u770b store \u4e2d\u7684 state \u6709\u6c92\u6709\u8b8a\u66f4\uff0c\u7528 shallow compare \u8ddf prevState \u6bd4\u8f03\u662f\u5426\u4e00\u6a23\n  // 4. \u6709\u8b8a\u66f4\u7684\u8a71\u5c31\u5229\u7528 setState \u5f37\u5236 re-render\n  // 5. \u5c07 step 4, 5 \u7684\u6b65\u9a5f\u653e\u5230 updateIfChange function \u4e2d\uff0c\u8a3b\u518a\u5230 redux\n\n  const store = useReduxContext();\n\n  const selectedState = selector(store.getState());\n  const prevSelectedState = useRef(selectedState);\n  \n  const [reRenderTimes, setReRenderTimes] = useState(0);\n\n  const forceReRender = () => {\n    setReRenderTimes((prev) => prev + 1);\n  }\n\n  const updateIfChange = () => {\n    const newSelectedState = selector(store.getState());\n\n    if (equalityFn(prevSelectedState.current, newSelectedState)) {\n      return;\n    }\n\n    prevSelectedState.current = newSelectedState;\n    forceReRender();\n  }\n\n  useEffect(() => {\n    const unsubscribe = store.subscribe(updateIfChange);\n\n    return unsubscribe;\n  }, []);\n\n  return selectedState;\n}\n")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("p",null,"\u89f8\u767c re-render \u904e\u7a0b"),(0,l.kt)("mermaid",{value:'flowchart TB\nid1["1. \u76e3\u807d\u7684 state \u6709\u8b8a\u52d5"] --\x3e id2["2. redux \u901a\u77e5\u8a3b\u518a\u7684\u6240\u6709 component"]\nid2 --\x3e id3["3. \u547c\u53eb updateIfChange \u51fd\u5f0f"]\nid3 --\x3e id4["4. \u78ba\u8a8d\u76e3\u807d\u7684 state \u662f\u5426\u6709\u8b8a\u52d5"]\nid4 --\x3e id5["5. \u82e5\u6709\u8b8a\u52d5\uff0c\u5f37\u5236 re-render"]'}),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("h2",{id:"simple-react-redux-\u6e2c\u8a66"},"simple ",(0,l.kt)("inlineCode",{parentName:"h2"},"react-redux")," \u6e2c\u8a66"),(0,l.kt)("p",null,"\u6700\u7d42\u7d50\u679c\u5982\u4e0b\uff0c\u53ef\u4ee5\u770b\u5230\u6211\u5011\u771f\u7684\u6210\u529f\u512a\u5316\u4e86 Context \ud83e\udd73\ud83e\udd73\ud83e\udd73"),(0,l.kt)("br",null),(0,l.kt)("iframe",{width:"720",height:"405",src:"https://www.youtube.com/embed/8udNka08Uwg?si=dWu5WJvsRYWthuPH",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("h2",{id:"\u7d50\u8ad6"},"\u7d50\u8ad6"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Context API \u6709\u6548\u80fd\u4e0a\u7684\u554f\u984c\uff0c\u4e3b\u8981\u662f\u4e00\u76f4\u7522\u751f\u65b0\u7684 context object \u9020\u6210\u7684"),(0,l.kt)("li",{parentName:"ol"},"react-redux \u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"useSelector")," \u5229\u7528\u4e86\u56fa\u5b9a\u7684 redux store reference\uff0c\u548c\u6bd4\u8f03 ",(0,l.kt)("inlineCode",{parentName:"li"},"useRef")," \u7d00\u9304\u7684 prevSelectedState\uff0c\u6210\u529f\u907f\u514d\u4e86\u4e0d\u5fc5\u8981\u7684 re-render")),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("h3",{id:"\u53c3\u8003\u8cc7\u6e90"},"\u53c3\u8003\u8cc7\u6e90"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://cloud.tencent.com/developer/article/1612960"},"React-Redux 100\u884c\u4ee3\u7801\u7b80\u6613\u7248\u63a2\u7a76\u539f\u7406\u3002\uff08\u9762\u8bd5\u70ed\u70b9\uff0cReact Hook + TypeScript\u5b9e\u73b0\uff09-\u817e\u8baf\u4e91\u5f00\u53d1\u8005\u793e\u533a-\u817e\u8baf\u4e91 (tencent.com)")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://react.dev/learn/passing-data-deeply-with-context"},"Passing Data Deeply with Context \u2013 React"))),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("br",null))}p.isMDXComponent=!0}}]);