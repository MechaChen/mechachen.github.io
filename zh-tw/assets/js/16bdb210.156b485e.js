"use strict";(self.webpackChunkbenson_doc=self.webpackChunkbenson_doc||[]).push([[6472],{3905:(t,e,n)=>{n.d(e,{Zo:()=>d,kt:()=>g});var a=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},l=Object.keys(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var s=a.createContext({}),p=function(t){var e=a.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):o(o({},e),t)),n},d=function(t){var e=p(t.components);return a.createElement(s.Provider,{value:e},t.children)},m="mdxType",u={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},c=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,l=t.originalType,s=t.parentName,d=i(t,["components","mdxType","originalType","parentName"]),m=p(n),c=r,g=m["".concat(s,".").concat(c)]||m[c]||u[c]||l;return n?a.createElement(g,o(o({ref:e},d),{},{components:n})):a.createElement(g,o({ref:e},d))}));function g(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=n.length,o=new Array(l);o[0]=c;var i={};for(var s in e)hasOwnProperty.call(e,s)&&(i[s]=e[s]);i.originalType=t,i[m]="string"==typeof t?t:r,o[1]=i;for(var p=2;p<l;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},2276:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const l={sidebar_position:3.5,sidebar_label:"[Google Docs] Optimization - Versioning",title:"[Google Docs] Optimization - Versioning",tags:["System Design","Optimization","Versioning"]},o=void 0,i={unversionedId:"Plan/google-doc-system-optimization-versioning",id:"Plan/google-doc-system-optimization-versioning",title:"[Google Docs] Optimization - Versioning",description:"Versioning",source:"@site/docs/Plan/google-doc-system-optimization-versioning.mdx",sourceDirName:"Plan",slug:"/Plan/google-doc-system-optimization-versioning",permalink:"/zh-tw/docs/Plan/google-doc-system-optimization-versioning",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Plan/google-doc-system-optimization-versioning.mdx",tags:[{label:"System Design",permalink:"/zh-tw/docs/tags/system-design"},{label:"Optimization",permalink:"/zh-tw/docs/tags/optimization"},{label:"Versioning",permalink:"/zh-tw/docs/tags/versioning"}],version:"current",lastUpdatedAt:1748703857,formattedLastUpdatedAt:"2025\u5e745\u670831\u65e5",sidebarPosition:3.5,frontMatter:{sidebar_position:3.5,sidebar_label:"[Google Docs] Optimization - Versioning",title:"[Google Docs] Optimization - Versioning",tags:["System Design","Optimization","Versioning"]},sidebar:"tutorialSidebar",previous:{title:"[Google Docs] Optimization - Undo/Redo",permalink:"/zh-tw/docs/Plan/google-doc-system-optimization-undo-redo"},next:{title:"[Catalog] Design Pattern",permalink:"/zh-tw/docs/Plan/design-pattern-catalog"}},s={},p=[{value:"Versioning",id:"versioning",level:2},{value:"1. Entire document snapshot",id:"1-entire-document-snapshot",level:2},{value:"2. Delta snapshot with 1st version",id:"2-delta-snapshot-with-1st-version",level:2},{value:"3. Hybrid document snapshot with delta snapshot",id:"3-hybrid-document-snapshot-with-delta-snapshot",level:2},{value:"References",id:"references",level:2}],d={toc:p},m="wrapper";function u(t){let{components:e,...n}=t;return(0,r.kt)(m,(0,a.Z)({},d,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"versioning"},"Versioning"),(0,r.kt)("p",null,"3 ways to implement versioning:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Entire document snapshot")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Delta snapshot with 1st version")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"Hybrid document snapshot with delta snapshot"))),(0,r.kt)("h2",{id:"1-entire-document-snapshot"},"1. Entire document snapshot"),(0,r.kt)("p",null,"For entire document snapshot, we can store the entire document by periodically."),(0,r.kt)("p",null,"But it has some disadvantages:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u274c require a lot of storage space.")),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"2-delta-snapshot-with-1st-version"},"2. Delta snapshot with 1st version"),(0,r.kt)("p",null,"For delta snapshot with 1st version, we can store the entire document as the 1st version, and then store the delta snapshot for each operation."),(0,r.kt)("p",null,"The operation record is like this:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Rev no."),(0,r.kt)("th",{parentName:"tr",align:null},"User"),(0,r.kt)("th",{parentName:"tr",align:null},"Operations"),(0,r.kt)("th",{parentName:"tr",align:null},"Timestamp"),(0,r.kt)("th",{parentName:"tr",align:null},"Document state"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"N/A"),(0,r.kt)("td",{parentName:"tr",align:null},"N/A"),(0,r.kt)("td",{parentName:"tr",align:null},"2024-08-03 10:00"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"Charlie"),(0,r.kt)("td",{parentName:"tr",align:null},'INS "Hello" @0'),(0,r.kt)("td",{parentName:"tr",align:null},"2024-08-03 10:05"),(0,r.kt)("td",{parentName:"tr",align:null},'"Hello"')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"Alice"),(0,r.kt)("td",{parentName:"tr",align:null},'INS " world" @5'),(0,r.kt)("td",{parentName:"tr",align:null},"2024-08-03 10:10"),(0,r.kt)("td",{parentName:"tr",align:null},'"Hello world"')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"Bob"),(0,r.kt)("td",{parentName:"tr",align:null},'INS "!" @11'),(0,r.kt)("td",{parentName:"tr",align:null},"2024-08-03 10:15"),(0,r.kt)("td",{parentName:"tr",align:null},'"Hello world!"')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"Donald"),(0,r.kt)("td",{parentName:"tr",align:null},'INS " Goodbye" @12'),(0,r.kt)("td",{parentName:"tr",align:null},"2024-08-05 09:00"),(0,r.kt)("td",{parentName:"tr",align:null},'"Hello world! Goodbye"')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"5"),(0,r.kt)("td",{parentName:"tr",align:null},"Erin"),(0,r.kt)("td",{parentName:"tr",align:null},'INS " earth" @20'),(0,r.kt)("td",{parentName:"tr",align:null},"2024-08-05 09:10"),(0,r.kt)("td",{parentName:"tr",align:null},'"Hello world! Goodbye earth"')))),(0,r.kt)("br",null),(0,r.kt)("p",null,"Which is very small compared to the entire document snapshot."),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("p",null,"But for better user experience, it can be merged into a fewer versions."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Version"),(0,r.kt)("th",{parentName:"tr",align:null},"Time"),(0,r.kt)("th",{parentName:"tr",align:null},"Last edited by"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"2024-08-03 10:15"),(0,r.kt)("td",{parentName:"tr",align:null},"Charlie, Bob, Alice")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"2024-08-05 09:10"),(0,r.kt)("td",{parentName:"tr",align:null},"Donald, Erin")))),(0,r.kt)("br",null),(0,r.kt)("p",null,"But it has some disadvantages:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u274c if the operation is a lot from 1st version, it might take lots of operations to see the latest version.")),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"3-hybrid-document-snapshot-with-delta-snapshot"},"3. Hybrid document snapshot with delta snapshot"),(0,r.kt)("p",null,"For hybrid document snapshot with delta snapshot, we can save snapshot periodically, and then save the delta snapshot from specific version."),(0,r.kt)("p",null,"Which makes:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u2705 the storage requirement is smaller than the entire document snapshot."),(0,r.kt)("li",{parentName:"ul"},"\u2705 the load speed is faster than the delta snapshot with 1st version.")),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.greatfrontend.com/questions/system-design/collaborative-editor-google-docs#history-and-versioning"},"Great Frontend - Google Docs - Versioning")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://discuss.yjs.dev/t/how-to-recover-to-the-specified-version/2301"},"Yjs Community - How to recover to the specified version"))),(0,r.kt)("br",null),(0,r.kt)("br",null))}u.isMDXComponent=!0}}]);