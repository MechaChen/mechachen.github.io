"use strict";(self.webpackChunkbenson_doc=self.webpackChunkbenson_doc||[]).push([[235],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>k});var r=t(7294);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function a(e,n){if(null==e)return{};var t,r,s=function(e,n){if(null==e)return{};var t,r,s={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(s[t]=e[t]);return s}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var i=r.createContext({}),c=function(e){var n=r.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=c(e.components);return r.createElement(i.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},f=r.forwardRef((function(e,n){var t=e.components,s=e.mdxType,l=e.originalType,i=e.parentName,u=a(e,["components","mdxType","originalType","parentName"]),p=c(t),f=s,k=p["".concat(i,".").concat(f)]||p[f]||d[f]||l;return t?r.createElement(k,o(o({ref:n},u),{},{components:t})):r.createElement(k,o({ref:n},u))}));function k(e,n){var t=arguments,s=n&&n.mdxType;if("string"==typeof e||s){var l=t.length,o=new Array(l);o[0]=f;var a={};for(var i in n)hasOwnProperty.call(n,i)&&(a[i]=n[i]);a.originalType=e,a[p]="string"==typeof e?e:s,o[1]=a;for(var c=2;c<l;c++)o[c]=t[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}f.displayName="MDXCreateElement"},8308:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>a,toc:()=>c});var r=t(7462),s=(t(7294),t(3905));const l={sidebar_label:"[Design Pattern] Chain of Responsibility pattern",title:"[Design Pattern] Chain of Responsibility pattern",tags:["Design Pattern"]},o=void 0,a={unversionedId:"Plan/chain-of-responsibility-pattern",id:"Plan/chain-of-responsibility-pattern",title:"[Design Pattern] Chain of Responsibility pattern",description:"\u70ba\u4ec0\u9ebc\u9700\u8981\u8cac\u4efb\u93c8\u6a21\u5f0f\uff1f",source:"@site/docs/Plan/chain-of-responsibility-pattern.mdx",sourceDirName:"Plan",slug:"/Plan/chain-of-responsibility-pattern",permalink:"/docs/Plan/chain-of-responsibility-pattern",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Plan/chain-of-responsibility-pattern.mdx",tags:[{label:"Design Pattern",permalink:"/docs/tags/design-pattern"}],version:"current",frontMatter:{sidebar_label:"[Design Pattern] Chain of Responsibility pattern",title:"[Design Pattern] Chain of Responsibility pattern",tags:["Design Pattern"]},sidebar:"tutorialSidebar",previous:{title:"[Design Pattern] \u6211\u5011\u70ba\u4ec0\u9ebc\u8981 Design patterns\uff1f",permalink:"/docs/Plan/why-we-need-design-patterns"},next:{title:"[Design Pattern] Flux pattern",permalink:"/docs/Plan/flux-pattern"}},i={},c=[{value:"\u70ba\u4ec0\u9ebc\u9700\u8981\u8cac\u4efb\u93c8\u6a21\u5f0f\uff1f",id:"\u70ba\u4ec0\u9ebc\u9700\u8981\u8cac\u4efb\u93c8\u6a21\u5f0f",level:2},{value:"\u4ec0\u9ebc\u662f\u8cac\u4efb\u93c8\u6a21\u5f0f\uff1f",id:"\u4ec0\u9ebc\u662f\u8cac\u4efb\u93c8\u6a21\u5f0f",level:2},{value:"\u73fe\u5be6\u4e2d\u7684\u60c5\u5883",id:"\u73fe\u5be6\u4e2d\u7684\u60c5\u5883",level:3},{value:"\u958b\u767c\u4e2d\u7684\u60c5\u5883",id:"\u958b\u767c\u4e2d\u7684\u60c5\u5883",level:3},{value:"\u65e9\u671f\u7684\u5be6\u73fe\u65b9\u5f0f",id:"\u65e9\u671f\u7684\u5be6\u73fe\u65b9\u5f0f",level:2},{value:"\u7bc4\u4f8b &amp; \u7121\u8cac\u4efb\u93c8\u7684\u5be6\u73fe",id:"\u7bc4\u4f8b--\u7121\u8cac\u4efb\u93c8\u7684\u5be6\u73fe",level:3},{value:"\u7121\u5f48\u6027\u7684\u8cac\u4efb\u93c8\u5be6\u73fe",id:"\u7121\u5f48\u6027\u7684\u8cac\u4efb\u93c8\u5be6\u73fe",level:3},{value:"\u9748\u6d3b\u53ef\u62c6\u5206\u7684\u8cac\u4efb\u93c8\u5be6\u73fe",id:"\u9748\u6d3b\u53ef\u62c6\u5206\u7684\u8cac\u4efb\u93c8\u5be6\u73fe",level:3},{value:"\u975e\u540c\u6b65\u5be6\u73fe",id:"\u975e\u540c\u6b65\u5be6\u73fe",level:3},{value:"\u73fe\u4ee3 JS \u8cac\u4efb\u93c8\u7684\u5be6\u73fe",id:"\u73fe\u4ee3-js-\u8cac\u4efb\u93c8\u7684\u5be6\u73fe",level:2},{value:"\u540c\u6b65\u93c8\u7684\u5be6\u73fe\uff1a\u5229\u7528 ES6 Class",id:"\u540c\u6b65\u93c8\u7684\u5be6\u73fe\u5229\u7528-es6-class",level:3},{value:"\u975e\u540c\u6b65\u93c8\u7684\u5be6\u73fe\uff1a\u5229\u7528 ES6 Promise",id:"\u975e\u540c\u6b65\u93c8\u7684\u5be6\u73fe\u5229\u7528-es6-promise",level:3},{value:"\u5be6\u969b\u958b\u767c\u7bc4\u4f8b",id:"\u5be6\u969b\u958b\u767c\u7bc4\u4f8b",level:2},{value:"1. \u53d6\u5f97 CSV \u8cc7\u6599\uff1a\u8cac\u4efb\u93c8\u6a21\u5f0f",id:"1-\u53d6\u5f97-csv-\u8cc7\u6599\u8cac\u4efb\u93c8\u6a21\u5f0f",level:3},{value:"2. \u53d6\u5f97 CSV \u8cc7\u6599 &amp; \u9a57\u8b49\uff1a\u7b56\u7565\u6a21\u5f0f + \u8cac\u4efb\u93c8\u6a21\u5f0f",id:"2-\u53d6\u5f97-csv-\u8cc7\u6599--\u9a57\u8b49\u7b56\u7565\u6a21\u5f0f--\u8cac\u4efb\u93c8\u6a21\u5f0f",level:3},{value:"\u7d50\u8ad6",id:"\u7d50\u8ad6",level:2},{value:"\u53c3\u8003\u8cc7\u6599",id:"\u53c3\u8003\u8cc7\u6599",level:3}],u={toc:c},p="wrapper";function d(e){let{components:n,...t}=e;return(0,s.kt)(p,(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("h2",{id:"\u70ba\u4ec0\u9ebc\u9700\u8981\u8cac\u4efb\u93c8\u6a21\u5f0f"},"\u70ba\u4ec0\u9ebc\u9700\u8981\u8cac\u4efb\u93c8\u6a21\u5f0f\uff1f"),(0,s.kt)("br",null),(0,s.kt)("blockquote",null,(0,s.kt)("p",null,"\ud83e\udd72 \u5e38\u6709\u65b0\u9700\u6c42\u9700\u8981\u53bb\u66f4\u6539\u8655\u7406\u4e8b\u60c5\u7684\u9806\u5e8f"),(0,s.kt)("p",null,"\u2705 \u6211\u5011\u53ef\u4ee5\u4f9d\u7167\u9700\u6c42\u5f88\u5f48\u6027\u7684\u53bb\u66f4\u6539 handlers \u7684\u9806\u5e8f ")),(0,s.kt)("br",null),(0,s.kt)("blockquote",null,(0,s.kt)("p",null,"\ud83e\udd72 \u5e38\u6709\u65b0\u9700\u6c42\u9700\u8981\u6539\u5230\u820a\u6709\u7684\u7a0b\u5f0f\u78bc\u908f\u8f2f\uff0c\u9020\u6210\u539f\u672c\u8655\u7406\u7684\u908f\u8f2f\u8d8a\u4f86\u8d8a\u5927\u5305\u548c\u8907\u96dc\uff0c\u96e3\u4ee5\u7dad\u8b77"),"\u2705 ",(0,s.kt)("b",null,"\u55ae\u4e00\u8077\u8cac\u539f\u5247 (Single Responsibility Principle)"),"\uff1a ",(0,s.kt)("br",null),"\u7576\u6709\u65b0\u9700\u6c42\u6642\uff0c\u4e0d\u6703\u53bb\u52d5\u5230\u89f8\u767c\u6574\u689d\u93c8\u7684 Class / Object / Function\uff0c\u800c\u662f\u5be6\u969b\u57f7\u884c\u6bcf\u9805\u7d30\u7bc0\u7684 Class / Object / Function"),(0,s.kt)("br",null),(0,s.kt)("blockquote",null,(0,s.kt)("p",null,"\ud83e\udd72 \u5e38\u6709\u65b0\u9700\u6c42\u9700\u8981\u6539\u5230\u820a\u6709\u7684\u7a0b\u5f0f\u78bc\u908f\u8f2f\uff0c\u9020\u6210\u539f\u672c\u8655\u7406\u7684\u908f\u8f2f\u8d8a\u4f86\u8d8a\u5927\u5305\u548c\u8907\u96dc\uff0c\u96e3\u4ee5\u7dad\u8b77"),"\u2705 ",(0,s.kt)("b",null,"\u958b\u653e\u5c01\u9589\u539f\u5247 (Open/Closed Principle)"),"\uff1a ",(0,s.kt)("br",null),"\u6211\u5011\u53ef\u4ee5\u8f15\u9b06\u5730\u52a0\u5165\u65b0\u7684 handler\uff0c\u800c\u4e0d\u9700\u8981\u6539\u5230\u820a\u6709 Class / Object / Function"),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("h2",{id:"\u4ec0\u9ebc\u662f\u8cac\u4efb\u93c8\u6a21\u5f0f"},"\u4ec0\u9ebc\u662f\u8cac\u4efb\u93c8\u6a21\u5f0f\uff1f"),(0,s.kt)("img",{src:"/img/chain-of-responsibility-illustration.png",alt:"chain-of-responsibility"}),(0,s.kt)("br",null),(0,s.kt)("blockquote",null,(0,s.kt)("b",null,"Chain of Responsibility")," is a behavioral design pattern that lets you pass requests along a chain of handlers. Upon receiving a request, each handler decides either to process the request or to pass it to the next handler in the chain"),(0,s.kt)("br",null),(0,s.kt)("p",null,"\u5c07\u9700\u6c42\u50b3\u9001\u5230\u4e00\u4e32\u7684\u8655\u7406\u7a0b\u5e8f\uff0c\u6bcf\u500b\u7a0b\u5e8f\u53ef\u4ee5\u6c7a\u5b9a\u662f\u5426\u8981\u8655\u7406\u6216\u50b3\u5230\u4e0b\u4e00\u500b\u93c8\u4e2d\u7684\u8655\u7406\u7a0b\u5e8f"),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("h3",{id:"\u73fe\u5be6\u4e2d\u7684\u60c5\u5883"},"\u73fe\u5be6\u4e2d\u7684\u60c5\u5883"),(0,s.kt)("img",{src:"/img/chain-of-responsibility-in-reality.png",alt:"chain-of-responsibility-in-reality"}),(0,s.kt)("p",null,"\u4f60\u525b\u8cb7\u4e26\u5b89\u88dd\u4e86\u4e00\u500b\u65b0\u7684\u786c\u9ad4\u5728\u4f60\u7684\u96fb\u8166\u4e0a\u3002\u7531\u65bc\u4f60\u662f\u500b\u6975\u5ba2\uff0c\u96fb\u8166\u4e0a\u5b89\u88dd\u4e86\u597d\u5e7e\u500b\u64cd\u4f5c\u7cfb\u7d71\u3002\u4f60\u8a66\u5716\u555f\u52d5\u6240\u6709\u7684\u64cd\u4f5c\u7cfb\u7d71\u4ee5\u67e5\u770b\u786c\u9ad4\u662f\u5426\u88ab\u652f\u6301\u3002Windows \u81ea\u52d5\u6aa2\u6e2c\u4e26\u555f\u7528\u786c\u9ad4\u3002\u7136\u800c\uff0c\u4f60\u5fc3\u611b\u7684 Linux \u62d2\u7d55\u8207\u65b0\u786c\u9ad4\u914d\u5408\u5de5\u4f5c\u3002\u61f7\u8457\u4e00\u7d72\u5e0c\u671b\uff0c\u4f60\u6c7a\u5b9a\u64a5\u6253\u76d2\u5b50\u4e0a\u5beb\u7684\u6280\u8853\u652f\u63f4\u96fb\u8a71\u865f\u78bc ",(0,s.kt)("br",null),(0,s.kt)("br",null)),(0,s.kt)("p",null,"\u4f60\u9996\u5148\u807d\u5230\u7684\u662f",(0,s.kt)("b",null,(0,s.kt)("u",null,"\u81ea\u52d5\u61c9\u7b54\u6a5f\u5668\u4eba\u7684\u8072\u97f3")),"\u3002\u5b83\u63d0\u51fa\u4e86\u4e5d\u500b\u91dd\u5c0d\u5404\u7a2e\u554f\u984c\u7684\u71b1\u9580\u89e3\u6c7a\u65b9\u6848\uff0c\u4f46\u90fd\u8207\u4f60\u7684\u60c5\u6cc1\u7121\u95dc\u3002\u904e\u4e86\u4e00\u6703\u5152\uff0c\u6a5f\u5668\u4eba\u5c07\u4f60\u8f49\u63a5\u5230\u4e00\u500b\u771f\u4eba\u5ba2\u670d ",(0,s.kt)("br",null),(0,s.kt)("br",null)),(0,s.kt)("p",null,"\u7136\u800c\uff0c\u5ba2\u670d\u4e5f\u7121\u6cd5\u63d0\u51fa\u5177\u9ad4\u7684\u5efa\u8b70\u3002\u4ed6\u4e0d\u505c\u5730\u5f15\u7528\u624b\u518a\u4e2d\u7684\u9577\u7bc7\u6bb5\u843d\uff0c\u62d2\u7d55\u807d\u53d6\u4f60\u7684\u610f\u898b\u3002\u7576\u4f60\u7b2c\u5341\u6b21\u807d\u5230 \u201c\u4f60\u8a66\u904e\u628a\u96fb\u8166\u95dc\u6389\u518d\u958b\u6a5f\u55ce\uff1f\u201d \u9019\u53e5\u8a71\u6642\uff0c\u4f60\u8981\u6c42",(0,s.kt)("b",null,(0,s.kt)("u",null,"\u8f49\u63a5\u5230\u4e00\u500b\u771f\u6b63\u7684\u5de5\u7a0b\u5e2b"))," ",(0,s.kt)("br",null),(0,s.kt)("br",null)),(0,s.kt)("p",null,"\u6700\u7d42\uff0c\u5ba2\u670d\u5c07\u4f60\u7684\u96fb\u8a71\u8f49\u63a5\u7d66\u4e86\u4e00\u4f4d\u5de5\u7a0b\u5e2b\uff0c\u4ed6\u5927\u6982\u5728\u8fa6\u516c\u6a13\u7684\u9670\u6697\u5730\u4e0b\u5ba4\u88e1\u7684\u5b64\u7368\u4f3a\u670d\u5668\u623f\u88e1\u6e34\u671b\u8457\u8207\u4eba\u804a\u5929\u5df2\u4e45\u3002\u9019\u4f4d\u5de5\u7a0b\u5e2b\u544a\u8a34\u4f60\u5230\u54ea\u88e1\u4e0b\u8f09\u5408\u9069\u7684\u9a45\u52d5\u7a0b\u5f0f\u4ee5\u53ca\u5982\u4f55\u5728 Linux \u4e0a\u5b89\u88dd\u5b83\u5011\u3002\u7d42\u65bc\uff0c\u554f\u984c\u89e3\u6c7a\u4e86\uff01\u4f60\u7d50\u675f\u4e86\u901a\u8a71\uff0c\u5fc3\u4e2d\u5145\u6eff\u559c\u6085"),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("h3",{id:"\u958b\u767c\u4e2d\u7684\u60c5\u5883"},"\u958b\u767c\u4e2d\u7684\u60c5\u5883"),(0,s.kt)("img",{src:"/img/chain-of-responsibility-in-development.png",alt:"chain-of-responsibility-in-development"}),(0,s.kt)("p",null,"\u60f3\u8c61\u4e00\u4e0b\uff0c\u4f60\u6b63\u5728\u958b\u767c\u4e00\u500b\u7dda\u4e0a\u8a02\u8cfc\u7cfb\u7d71\u3002\u4f60\u5e0c\u671b\u9650\u5236\u53ea\u6709\u5df2\u9a57\u8b49\u7684\u7528\u6236\u624d\u80fd\u5275\u5efa\u8a02\u55ae\u3002\u6b64\u5916\uff0c\u64c1\u6709\u7ba1\u7406\u6b0a\u9650\u7684\u7528\u6236\u5fc5\u9808\u80fd\u5920\u5b8c\u5168\u8a2a\u554f\u6240\u6709\u8a02\u55ae\u3002"),(0,s.kt)("p",null,"\u7d93\u904e\u4e00\u756a\u898f\u5283\u5f8c\uff0c\u4f60\u610f\u8b58\u5230\u9019\u4e9b\u6aa2\u67e5\u5fc5\u9808\u4f9d\u6b21\u9032\u884c\u3002\u61c9\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5728\u63a5\u6536\u5230\u5305\u542b\u7528\u6236\u6191\u8b49\u7684\u8acb\u6c42\u6642\u5617\u8a66\u5c0d\u7528\u6236\u9032\u884c\u7cfb\u7d71\u9a57\u8b49\u3002\u7136\u800c\uff0c\u5982\u679c\u90a3\u4e9b\u6191\u8b49\u4e0d\u6b63\u78ba\u4e14\u9a57\u8b49\u5931\u6557\uff0c\u90a3\u9ebc\u5c31\u6c92\u6709\u7406\u7531\u9032\u884c\u4efb\u4f55\u5176\u4ed6\u6aa2\u67e5"),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("img",{src:"/img/chain-of-responsibility-in-development-2.png",alt:"chain-of-responsibility-in-development-2"}),(0,s.kt)("p",null,"\u5728\u63a5\u4e0b\u4f86\u7684\u5e7e\u500b\u6708\u88e1\uff0c\u4f60\u5be6\u65bd\u4e86\u66f4\u591a\u9019\u4e9b\u9806\u5e8f\u6aa2\u67e5\u3002"),(0,s.kt)("p",null,"\u4f60\u7684\u5176\u4e2d\u4e00\u4f4d\u540c\u4e8b\u5efa\u8b70\uff0c\u76f4\u63a5\u5c07\u539f\u59cb\u6578\u64da\u50b3\u905e\u5230\u8a02\u8cfc\u7cfb\u7d71\u662f\u4e0d\u5b89\u5168\u7684\u3002\u56e0\u6b64\uff0c\u4f60\u6dfb\u52a0\u4e86\u4e00\u500b\u984d\u5916\u7684\u9a57\u8b49\u6b65\u9a5f\u4f86\u6e05\u7406\u8acb\u6c42\u4e2d\u7684\u6578\u64da\u3002"),(0,s.kt)("p",null,"\u5f8c\u4f86\uff0c\u6709\u4eba\u6ce8\u610f\u5230\u7cfb\u7d71\u5bb9\u6613\u53d7\u5230\u66b4\u529b\u7834\u89e3\u5bc6\u78bc\u653b\u64ca\u3002\u70ba\u4e86\u89e3\u6c7a\u9019\u500b\u554f\u984c\uff0c\u4f60\u8fc5\u901f\u6dfb\u52a0\u4e86\u4e00\u500b\u6aa2\u67e5\uff0c\u904e\u6ffe\u4f86\u81ea\u540c\u4e00 IP \u5730\u5740\u7684\u591a\u6b21\u5931\u6557\u8acb\u6c42\u3002"),(0,s.kt)("p",null,"\u53e6\u4e00\u4f4d\u540c\u4e8b\u5efa\u8b70\uff0c\u5c0d\u65bc\u5305\u542b\u76f8\u540c\u6578\u64da\u7684\u91cd\u8907\u8acb\u6c42\uff0c\u53ef\u4ee5\u901a\u904e\u8fd4\u56de\u7de9\u5b58\u7684\u7d50\u679c\u4f86\u52a0\u5feb\u7cfb\u7d71\u901f\u5ea6\u3002\u56e0\u6b64\uff0c\u4f60\u6dfb\u52a0\u4e86\u53e6\u4e00\u500b\u6aa2\u67e5\uff0c\u53ea\u6709\u5728\u6c92\u6709\u5408\u9069\u7684\u7de9\u5b58\u97ff\u61c9\u6642\uff0c\u8acb\u6c42\u624d\u6703\u901a\u904e\u5230\u7cfb\u7d71"),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("p",null,"\u9019\u4e9b\u6aa2\u67e5\u7684\u4ee3\u78bc\uff0c\u539f\u672c\u5c31\u5df2\u7d93\u986f\u5f97\u51cc\u4e82\uff0c\u96a8\u8457\u4f60\u6dfb\u52a0\u6bcf\u4e00\u500b\u65b0\u529f\u80fd\uff0c\u8b8a\u5f97\u8d8a\u4f86\u8d8a\u81c3\u816b\u3002\u6539\u8b8a\u4e00\u500b\u6aa2\u67e5\u6709\u6642\u6703\u5f71\u97ff\u5230\u5176\u4ed6\u6aa2\u67e5\u3002\u6700\u7cdf\u7cd5\u7684\u662f\uff0c\u7576\u4f60\u5617\u8a66\u91cd\u7528\u9019\u4e9b\u6aa2\u67e5\u4f86\u4fdd\u8b77\u7cfb\u7d71\u7684\u5176\u4ed6\u7d44\u4ef6\u6642\uff0c\u4f60\u4e0d\u5f97\u4e0d\u91cd\u8907\u4e00\u4e9b\u4ee3\u78bc\uff0c\u56e0\u70ba\u90a3\u4e9b\u7d44\u4ef6\u9700\u8981\u90e8\u5206\u6aa2\u67e5\uff0c\u4f46\u4e0d\u662f\u5168\u90e8\u3002"),(0,s.kt)("br",null),(0,s.kt)("br",null),"\u7cfb\u7d71\u8b8a\u5f97\u975e\u5e38\u96e3\u4ee5\u7406\u89e3\u4e14\u7dad\u8b77\u6210\u672c\u9ad8\u6602\u3002\u4f60\u8207\u9019\u4e9b\u4ee3\u78bc\u596e\u9b25\u4e86\u4e00\u6bb5\u6642\u9593\uff0c\u76f4\u5230\u6709\u4e00\u5929\u4f60\u6c7a\u5b9a\u91cd\u69cb\u6574\u500b\u7cfb\u7d71",(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("img",{src:"/img/chain-of-responsibility-in-development-3.png",alt:"chain-of-responsibility-in-development-3"}),(0,s.kt)("p",null,"\u50cf\u8a31\u591a\u5176\u4ed6\u884c\u70ba\u8a2d\u8a08\u6a21\u5f0f\u4e00\u6a23\uff0c\u8cac\u4efb\u93c8\u6a21\u5f0f\u4f9d\u8cf4\u65bc\u5c07\u7279\u5b9a\u884c\u70ba\u8f49\u5316\u70ba\u7368\u7acb\u7684\u5c0d\u8c61\uff0c\u7a31\u70ba\u8655\u7406\u7a0b\u5e8f\u3002"),(0,s.kt)("p",null,"\u8a72\u6a21\u5f0f\u5efa\u8b70\u5c07\u9019\u4e9b\u8655\u7406\u7a0b\u5e8f\u93c8\u63a5\u6210\u4e00\u500b\u93c8\u3002\u6bcf\u500b\u93c8\u63a5\u7684\u8655\u7406\u7a0b\u5e8f\u90fd\u6709\u4e00\u500b\u5b57\u6bb5\uff0c\u7528\u65bc\u5b58\u5132\u5c0d\u93c8\u4e2d\u4e0b\u4e00\u500b\u8655\u7406\u7a0b\u5e8f\u7684\u5f15\u7528\u3002\u9664\u4e86\u8655\u7406\u8acb\u6c42\u5916\uff0c\u8655\u7406\u7a0b\u5e8f\u9084\u6703\u5c07\u8acb\u6c42\u9032\u4e00\u6b65\u50b3\u905e\u4e0b\u53bb\u3002\u8acb\u6c42\u6cbf\u8457\u93c8\u50b3\u905e\uff0c\u76f4\u5230\u6240\u6709\u8655\u7406\u7a0b\u5e8f\u90fd\u6709\u6a5f\u6703\u8655\u7406\u5b83\u3002"),(0,s.kt)("p",null,"\u9019\u88e1\u662f\u6700\u597d\u7684\u90e8\u5206\uff1a\u8655\u7406\u7a0b\u5e8f\u53ef\u4ee5\u6c7a\u5b9a\u4e0d\u518d\u5c07\u8acb\u6c42\u50b3\u905e\u5230\u93c8\u7684\u4e0b\u4e00\u500b\u8655\u7406\u7a0b\u5e8f\uff0c\u5f9e\u800c\u6709\u6548\u5730\u505c\u6b62\u4efb\u4f55\u9032\u4e00\u6b65\u7684\u8655\u7406"),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("h2",{id:"\u65e9\u671f\u7684\u5be6\u73fe\u65b9\u5f0f"},"\u65e9\u671f\u7684\u5be6\u73fe\u65b9\u5f0f"),(0,s.kt)("h3",{id:"\u7bc4\u4f8b--\u7121\u8cac\u4efb\u93c8\u7684\u5be6\u73fe"},"\u7bc4\u4f8b & \u7121\u8cac\u4efb\u93c8\u7684\u5be6\u73fe"),(0,s.kt)("p",null,"\u5047\u8a2d\u6211\u5011\u8ca0\u8cac\u4e00\u500b\u8ca9\u8ce3\u624b\u6a5f\u7684\u96fb\u5546\u7db2\u7ad9\uff0c\u7d93\u904e\u5206\u5225\u7e73\u4ea4 500 \u5143\u5b9a\u91d1\u548c 200 \u5143\u5b9a\u91d1\u7684\u5169\u8f2a\u9810\u5b9a\u5f8c(\u8a02\u55ae\u5df2\u5728\u6b64\u6642\u751f\u6210)\uff0c\u73fe\u5728\u5df2\u7d93\u5230\u4e86\u6b63\u5f0f\u8cfc\u8cb7\u7684\u968e\u6bb5\u3002"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"orderType\uff1a\u8868\u793a\u8a02\u55ae\u985e\u578b(\u5b9a\u91d1\u7528\u6236\u6216\u4e00\u822c\u8cfc\u8cb7\u7528\u6236)"),(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"code \u7684\u503c\u70ba 1 \u7684\u6642\u5019\u662f 500 \u5143\u5b9a\u91d1\u7528\u6236"),(0,s.kt)("li",{parentName:"ul"},"code \u7684\u503c\u70ba 2 \u7684\u6642\u5019\u662f 200 \u5143\u5b9a\u91d1\u7528\u6236"),(0,s.kt)("li",{parentName:"ul"},"code \u7684\u503c\u70ba 3 \u7684\u6642\u5019\u662f\u666e\u901a\u8cfc\u8cb7\u7528\u6236"))),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"pay\uff1a\u8868\u793a\u4f7f\u7528\u8005\u662f\u5426\u5df2\u652f\u4ed8\u8a02\u91d1\uff0c\u503c\u70ba true \u6216 false\uff0c\u96d6\u7136\u4f7f\u7528\u8005\u5df2\u7d93\u4e0b\u904e 500 \u5143\u5b9a\u91d1\u7684\u8a02\u55ae\uff0c\u4f46\u5982\u679c\u4ed6\u4e00\u76f4\u6c92\u6709\u652f\u4ed8\u5b9a\u91d1\uff0c\u73fe\u5728\u53ea\u80fd\u964d\u7d1a\u9032\u5165\u666e\u901a\u8cfc\u8cb7\u6a21\u5f0f\u3002")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("p",{parentName:"li"},"stock\uff1a\u8868\u793a\u76ee\u524d\u7528\u65bc\u666e\u901a\u8cfc\u8cb7\u7684\u624b\u6a5f\u5eab\u5b58\u6578\u91cf\uff0c\u5df2\u7d93\u652f\u4ed8\u904e 500 \u5143\u6216 200 \u5143\u5b9a\u91d1\u7684\u7528\u6236\u4e0d\u53d7\u6b64\u9650\u5236\u3002"))),(0,s.kt)("br",null),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"const order = function (orderType, pay, stock) {\n  if (orderType === 1) {\n    if (pay === true) {\n      console.log('500 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 100 \u512a\u60e0\u5238');\n    } else {\n      if (stock > 0) {\n        console.log('\u666e\u901a\u8cfc\u8cb7, \u7121\u512a\u60e0\u5238');\n      } else {\n        console.log('\u624b\u6a5f\u5eab\u5b58\u4e0d\u8db3');\n      }\n    }\n  }\n\n  else if (orderType === 2) {\n    if (pay === true) {\n      console.log('200 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 50 \u512a\u60e0\u5238');\n    } else {\n      if (stock > 0) {\n        console.log('\u666e\u901a\u8cfc\u8cb7, \u7121\u512a\u60e0\u5238');\n      } else {\n        console.log('\u624b\u6a5f\u5eab\u5b58\u4e0d\u8db3');\n      }\n    }\n  }\n\n  else if (orderType === 3) {\n    if (stock > 0) {\n      console.log('\u666e\u901a\u8cfc\u8cb7, \u7121\u512a\u60e0\u5238');\n    } else {\n      console.log('\u624b\u6a5f\u5eab\u5b58\u4e0d\u8db3');\n    }\n  }\n};\n\norder(1, true, 500); // output: 500 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 100 \u512a\u60e0\u5238\norder(1, false, 0); // output: \u624b\u6a5f\u5eab\u5b58\u4e0d\u8db3\norder(2, true, 500); // output: 200 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 50 \u512a\u60e0\u5238\norder(3, false, 100); // output: \u666e\u901a\u8cfc\u8cb7, \u7121\u512a\u60e0\u5238\n")),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("h3",{id:"\u7121\u5f48\u6027\u7684\u8cac\u4efb\u93c8\u5be6\u73fe"},"\u7121\u5f48\u6027\u7684\u8cac\u4efb\u93c8\u5be6\u73fe"),(0,s.kt)("p",null,"\u6211\u5011\u5617\u8a66\u7528\u8cac\u4efb\u93c8\u6a21\u5f0f\u91cd\u69cb\u7a0b\u5f0f\u78bc"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"const orderNormal = function (orderType, pay, stock) {\n  if (stock > 0) {\n    console.log('\u666e\u901a\u8cfc\u8cb7, \u7121\u512a\u60e0\u5238');\n  } else {\n    console.log('\u624b\u6a5f\u5eab\u5b58\u4e0d\u8db3');\n  }\n};\n\nconst order200 = function (orderType, pay, stock) {\n  if (orderType === 2 && pay === true) {\n    console.log('200 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 50 \u512a\u60e0\u5238');\n  } else {\n    orderNormal(orderType, pay, stock);\n  }\n};\n\nconst order500 = function (orderType, pay, stock) {\n    if (orderType === 1 && pay === true) {\n        console.log('500 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 100 \u512a\u60e0\u5238');\n    } else {\n        order200(orderType, pay, stock);\n    }\n};\n\norder500( 1 , true, 500); // output: 500 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 100 \u512a\u60e0\u5238\norder500( 1, false, 500 ); // output: \u666e\u901a\u8cfc\u8cb7, \u7121\u512a\u60e0\u5238\norder500( 2, true, 500 ); // output: 200 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 50 \u512a\u60e0\u5238\norder500( 3, false, 500 ); // output: \u666e\u901a\u8cfc\u8cb7, \u7121\u512a\u60e0\u5238\norder500( 3, false, 0 ); // output: \u624b\u6a5f\u5eab\u5b58\u4e0d\u8db3\n")),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("p",null,"\u9019\u4f9d\u7136\u662f\u9055\u53cd\u958b\u653e-\u5c01\u9589\u539f\u5247\u7684\uff0c\u5982\u679c\u6709\u5929\u6211\u5011\u8981\u589e\u52a0 300 \u5143\u9810\u8a02\u6216\u53bb\u6389 200 \u5143\u9810\u8a02\uff0c\u610f\u5473\u8457\u5c31\u5fc5\u9808\u6539\u52d5\u9019\u4e9b\u696d\u52d9\u51fd\u6578\u5167\u90e8\u3002\u5c31\u50cf\u4e00\u689d\u74b0\u74b0\u76f8\u6263\u6253\u4e86\u6b7b\u7d50\u7684\u93c8\u689d\u3002"),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("h3",{id:"\u9748\u6d3b\u53ef\u62c6\u5206\u7684\u8cac\u4efb\u93c8\u5be6\u73fe"},"\u9748\u6d3b\u53ef\u62c6\u5206\u7684\u8cac\u4efb\u93c8\u5be6\u73fe"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"const order500 = function (orderType, pay, stock) {\n  if (orderType === 1 && pay === true) {\n    console.log('500 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 100 \u512a\u60e0\u5238');\n  } else {\n    return 'nextSuccessor';\n  }\n};\n\nconst order200 = function (orderType, pay, stock) {\n  if (orderType === 2 && pay === true) {\n    console.log('200 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 50 \u512a\u60e0\u5238');\n  } else {\n    return 'nextSuccessor';\n  }\n};\n\nconst orderNormal = function (orderType, pay, stock) {\n  if (stock > 0) {\n    console.log('\u666e\u901a\u8cfc\u8cb7, \u7121\u512a\u60e0\u5238');\n  } else {\n    console.log('\u624b\u6a5f\u5eab\u5b58\u4e0d\u8db3');\n  }\n};\n\nclass Chain {\n  constructor(fn) {\n    this.fn = fn;\n    this.successor = null;\n  }\n  setNextSuccessor(successor) {\n    this.successor = successor;\n    return this.successor;\n  }\n  passRequest(...args) {\n    const result = this.fn(...args);\n    if (result === 'nextSuccessor') {\n      return this.successor && this.successor.passRequest(...args);\n    }\n    return result;\n  }\n}\n\nconst chainOrder500 = new Chain(order500);\nconst chainOrder200 = new Chain(order200);\nconst chainOrderNormal = new Chain(orderNormal);\n\nchainOrder500\n  .setNextSuccessor(chainOrder200)\n  .setNextSuccessor(chainOrderNormal);\n\n\nchainOrder500.passRequest(1, true, 500); // output: 500 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 100 \u512a\u60e0\u5238\nchainOrder500.passRequest(1, false, 0); // output: \u624b\u6a5f\u5eab\u5b58\u4e0d\u8db3\nchainOrder500.passRequest(2, true, 500); // output: 200 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 50 \u512a\u60e0\u5238\nchainOrder500.passRequest(3, false, 100); // output: \u666e\u901a\u8cfc\u8cb7, \u7121\u512a\u60e0\u5238\nchainOrder500.passRequest(3, false, 0); // output: \u624b\u6a5f\u5eab\u5b58\u4e0d\u8db3\n")),(0,s.kt)("br",null),(0,s.kt)("br",null),"\u900f\u904e\u6539\u9032\uff0c\u6211\u5011\u53ef\u4ee5\u81ea\u7531\u9748\u6d3b\u5730\u589e\u52a0\u3001\u79fb\u9664\u548c\u4fee\u6539\u93c8\u4e2d\u7684\u7bc0\u9ede\u9806\u5e8f\uff0c\u5047\u5982\u67d0\u5929\u7db2\u7ad9\u904b\u71df\u4eba\u54e1\u53c8\u60f3\u51fa\u4e86\u652f\u6301 300 \u5143\u5b9a\u91d1\u8cfc\u8cb7\uff0c\u90a3\u6211\u5011\u5c31\u5728\u8a72\u93c8\u4e2d\u589e\u52a0\u4e00\u500b\u7bc0\u9ede\u5373\u53ef",(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"const order300 = function (orderType, pay, stock) {\n  if (orderType === 4 && pay === true) {\n    console.log('300 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 60 \u512a\u60e0\u5238');\n  } else {\n    return 'nextSuccessor';\n  }\n};\n\nconst chainOrder500 = new Chain(order500);\nconst chainOrder300 = new Chain(order300);\nconst chainOrder200 = new Chain(order200);\nconst chainOrderNormal = new Chain(orderNormal);\n\nchainOrder500\n  .setNextSuccessor(chainOrder300)\n  .setNextSuccessor(chainOrder200)\n  .setNextSuccessor(chainOrderNormal);\n\nchainOrder500.passRequest(4, true, 0); // output: 300 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 60 \u512a\u60e0\u5238\n")),(0,s.kt)("h3",{id:"\u975e\u540c\u6b65\u5be6\u73fe"},"\u975e\u540c\u6b65\u5be6\u73fe"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"class Chain {\n  constructor(fn) {\n    this.fn = fn;\n    this.successor = null;\n  }\n  setNextSuccessor(successor) {\n    this.successor = successor;\n    return this.successor;\n  }\n  passRequest(...args) {\n    const result = this.fn(...args);\n    if (result === 'nextSuccessor') {\n      return this.successor && this.successor.passRequest(...args);\n    }\n    return result;\n  }\n  next(...args) {\n    return this.successor && this.successor.passRequest(...args);\n  }\n}\n\nconst fn1 = new Chain(function () {\n  console.log(1);\n  return 'nextSuccessor';\n});\n\nconst fn2 = new Chain(function () {\n  console.log(2);\n  var self = this;\n  setTimeout(function () {\n    self.next();\n  }, 1000);\n});\n\nconst fn3 = new Chain(function () {\n  console.log(3);\n});\n\nfn1.setNextSuccessor(fn2).setNextSuccessor(fn3);\nfn1.passRequest();\n// 1\n// 2\n// \u4e00\u79d2\u5f8c\u5370\u51fa 3\n")),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("h2",{id:"\u73fe\u4ee3-js-\u8cac\u4efb\u93c8\u7684\u5be6\u73fe"},"\u73fe\u4ee3 JS \u8cac\u4efb\u93c8\u7684\u5be6\u73fe"),(0,s.kt)("h3",{id:"\u540c\u6b65\u93c8\u7684\u5be6\u73fe\u5229\u7528-es6-class"},"\u540c\u6b65\u93c8\u7684\u5be6\u73fe\uff1a\u5229\u7528 ES6 Class"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"class OrderManager {\n  handle500Deposit() {\n    if (orderType === 1 && pay === true) {\n      throw '500 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 100 \u512a\u60e0\u5238';\n    }\n    return this;\n  }\n\n  handle200Deposit() {\n    if (orderType === 2 && pay === true) {\n      throw '500 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 100 \u512a\u60e0\u5238';\n    }\n    return this;\n  }\n\n  handleNormalOrder() {\n    if (stock > 0) {\n      return '\u666e\u901a\u8cfc\u8cb7, \u7121\u512a\u60e0\u5238';\n    } else {\n      return '\u624b\u6a5f\u5eab\u5b58\u4e0d\u8db3';\n    }\n  }\n\n}\n\nconst orderManager = new OrderManager();\n\ntry {\n  const normalMessage = orderManager\n    .handle500Deposit()\n    .handle200Deposit()\n    .handleNormalOrder()\n  console.log(normalMessage);\n}\n\ncatch(couponMessage) {\n  console.log(couponMessage);\n}\n")),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("h3",{id:"\u975e\u540c\u6b65\u93c8\u7684\u5be6\u73fe\u5229\u7528-es6-promise"},"\u975e\u540c\u6b65\u93c8\u7684\u5be6\u73fe\uff1a\u5229\u7528 ES6 Promise"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-js"},"const handle500Deposit = async () => {\n  if (orderType === 1 && pay === true) {\n    throw '500 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 100 \u512a\u60e0\u5238';\n  }\n}\n\nconst handle200Deposit = async () => {\n  if (orderType === 2 && pay === true) {\n    throw '500 \u5143\u8a02\u91d1\u9810\u8cfc, \u53d6\u5f97 100 \u512a\u60e0\u5238';\n  }\n  return this;\n}\n\nconst handleNormalOrder = () => {\n  if (stock > 0) {\n    return '\u666e\u901a\u8cfc\u8cb7, \u7121\u512a\u60e0\u5238';\n  } else {\n    return '\u624b\u6a5f\u5eab\u5b58\u4e0d\u8db3';\n  }\n}\n\nhandle500Deposit()\n  .then(handle200Deposit)\n  .then(handleNormalOrder)\n  .then((normalMessage) => {\n    console.log(normalMessage);\n  })\n  .catch((couponMessage) => {\n      console.log(couponMessage);\n  })\n")),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("h2",{id:"\u5be6\u969b\u958b\u767c\u7bc4\u4f8b"},"\u5be6\u969b\u958b\u767c\u7bc4\u4f8b"),(0,s.kt)("h3",{id:"1-\u53d6\u5f97-csv-\u8cc7\u6599\u8cac\u4efb\u93c8\u6a21\u5f0f"},"1. \u53d6\u5f97 CSV \u8cc7\u6599\uff1a\u8cac\u4efb\u93c8\u6a21\u5f0f"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"import { useState } from 'react'\nimport './App.css'\n\nfunction App() {\n  const [csvData, setCsvData] = useState();\n  const [fileError, setFileError] = useState();\n\n  const checkIsCsv = async (e) => {\n    const file = e.target.files[0];\n    if (file.type !== 'text/csv') {\n      throw new Error('File type error');\n    }\n    return file;\n  }\n\n  const readCsvFileText = (csvFile) => {\n    const fileReader = new FileReader();\n    fileReader.readAsText(csvFile);\n\n    return new Promise((resolve) => {\n      fileReader.onload = function(event) {\n        const csvAllText = fileReader.result;\n        resolve(csvAllText);\n      };\n    })\n  }\n\n  const storeCsvData = async (csvData) => {\n    setCsvData(csvData);\n    setFileError('');\n  }\n\n  const getCsvData = (e) => {\n    checkIsCsv(e)\n      .then(readCsvFileText)\n      .then(storeCsvData)\n      .catch((err) => {\n        setCsvData('');\n        setFileError(err.message);\n      })\n  }\n\n  return (\n    <>\n      <input type=\"file\" onChange={getCsvData} />\n      {csvData && (\n        <>\n          <h2>Csv data</h2>\n          <p>{csvData}</p>\n        </>\n      )}\n      {fileError && (\n        <p style={{ color: '#f00' }}>{fileError}</p>\n      )}\n    </>\n  )\n}\n\nexport default App\n")),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("h3",{id:"2-\u53d6\u5f97-csv-\u8cc7\u6599--\u9a57\u8b49\u7b56\u7565\u6a21\u5f0f--\u8cac\u4efb\u93c8\u6a21\u5f0f"},"2. \u53d6\u5f97 CSV \u8cc7\u6599 & \u9a57\u8b49\uff1a\u7b56\u7565\u6a21\u5f0f + \u8cac\u4efb\u93c8\u6a21\u5f0f"),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://stackblitz.com/edit/vitejs-vite-xjzq5y?file=App.js"},"Get & Validate CSV data")),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-jsx"},"import { useState } from 'react'\nimport Papa from 'papaparse';\nimport './App.css'\n\nconst fileRulesMap = {\n  isCsv: {\n    test(file) {\n      if (file.type !== 'text/csv') {\n        return 'File type error';\n      }\n    }\n  },\n  isExcceedMax: {\n    test(file) {\n      if (file.size > 200) {\n        return 'Excceed Max size';\n      }\n    }\n  }\n}\n\nconst recordRules = {\n  isNameRequired: {\n    test(record) {\n      if (!record.name.length) {\n        return 'Name is required'\n      }\n    }\n  },\n  isEmailRequired: {\n    test(record) {\n      if (!record.name.length) {\n        return 'Email is required'\n      }\n    }\n  }\n}\n\nfunction App() {\n  const [csvData, setCsvData] = useState();\n  const [fileError, setFileError] = useState();\n\n  const checkIsCsv = async (e) => {\n    const file = e.target.files[0];\n    const fileRules = Object.values(fileRulesMap)\n\n    const errors = fileRules.reduce((errors, fileRule) => {\n      const error = fileRule.test(file);\n      if (error) errors.push(error);\n      return errors;\n    }, [])\n\n    if (errors.length > 0) {\n      throw new Error(errors.join(','))\n    }\n\n    return file;\n  }\n\n  const readCsvFileText = (csvFile) => {\n    const fileReader = new FileReader();\n    fileReader.readAsText(csvFile);\n\n    return new Promise((resolve) => {\n      fileReader.onload = function(event) {\n        const csvAllText = fileReader.result;\n        resolve(csvAllText);\n      };\n    })\n  }\n\n  const storeCsvData = async (csvData) => {\n    setCsvData(csvData);\n    setFileError('');\n    \n    const parsedCsv = Papa.parse(csvData, { header: true });\n    return parsedCsv;\n  }\n\n  const getCsvData = (e) => {\n    checkIsCsv(e)\n      .then(readCsvFileText)\n      .then(storeCsvData)\n      .catch((err) => {\n        setCsvData('');\n        setFileError(err.message);\n      })\n  }\n\n  return (\n    <>\n      <input type=\"file\" onChange={getCsvData} />\n      {csvData && (\n        <>\n          <h2>Csv data</h2>\n          <p>{csvData}</p>\n        </>\n      )}\n      {fileError && (\n        <p style={{ color: '#f00' }}>{fileError}</p>\n      )}\n    </>\n  )\n}\nexport default App\n")),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("h2",{id:"\u7d50\u8ad6"},"\u7d50\u8ad6"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"\u7576\u6709\u4e00\u7cfb\u5217\u6b65\u9a5f\u9700\u8981\u4f9d\u5e8f\u57f7\u884c\uff0c\u4e14\u6bcf\u500b\u6b65\u9a5f\u90fd\u6709\u53ef\u80fd\u5931\u6557\u6642\uff0c\u4e14\u57f7\u884c\u9806\u5e8f\u8981\u5f88\u5f48\u6027\u7684\u8a71\uff0c\u53ef\u4ee5\u4f7f\u7528\u8cac\u4efb\u93c8\u6a21\u5f0f"),(0,s.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u5229\u7528 ES6 Class, Promise \u4f86\u7c21\u55ae\u5be6\u73fe\u8cac\u4efb\u93c8\u6a21\u5f0f")),(0,s.kt)("br",null),(0,s.kt)("br",null),(0,s.kt)("h3",{id:"\u53c3\u8003\u8cc7\u6599"},"\u53c3\u8003\u8cc7\u6599"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=&cad=rja&uact=8&ved=2ahUKEwjoqvv_goiJAxWvjK8BHUZCK3QQFnoECBcQAQ&url=https%3A%2F%2Fgithub.com%2Fmynane%2FPDF%2Fblob%2Fmaster%2FJavaScript%25E8%25AE%25BE%25E8%25AE%25A1%25E6%25A8%25A1%25E5%25BC%258F%25E4%25B8%258E%25E5%25BC%2580%25E5%258F%2591%25E5%25AE%259E%25E8%25B7%25B5.pdf&usg=AOvVaw2TtCMfHgrVvG0_CV9InyEz&opi=89978449"},"JavaScript\u8bbe\u8ba1\u6a21\u5f0f\u4e0e\u5f00\u53d1\u5b9e\u8df5")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://refactoring.guru/design-patterns/chain-of-responsibility"},"Refactoring Guru - Chain of Responsibility"))),(0,s.kt)("br",null),(0,s.kt)("br",null))}d.isMDXComponent=!0}}]);