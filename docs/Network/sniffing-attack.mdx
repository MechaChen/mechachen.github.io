---
sidebar_position: 2
sidebar_label: '[HTTPS] 1.1 - Sniffing attack (嗅探攻擊)'
title: '[HTTPS] 1.1 - Sniffing attack (嗅探攻擊)'
tags:
  - Security
  - HTTPS

---


## 問題：Sniffing attack (嗅探攻擊)

在 HTTP 上，我們的資料都是以 Plain Text 傳輸的，沒有任何的保護，<br />
就好像在裸奔一樣，任何人都可以輕易的監聽並取得資料 <br /><br />

<figure style={{ marginLeft: 0 }}>
  <img src="/img/sniffing-attack.png" width="500" />
  <figcaption>
    圖片來源：
    <a href="https://dzone.com/articles/what-is-a-sniffing-attack">
      https://dzone.com/articles/what-is-a-sniffing-attack
    </a>
  </figcaption>
</figure>

<br />

那我們傳輸的資料就會輕易的被竊取走


<br />


## 解方一：Symmetric encryption (對稱加密)

### 原理

這時呢，我們為了不被監聽者輕易讀取我們的資料，我們可以做加密 (Encryption) 的動作，<br />
我們先用最簡單的對稱加密 (也就是說，雙方的密鑰都是同一把)，並加密我們的訊息，<br />
流程如下：
1. Person 1 將鑰匙傳給 Person 2
2. Person 1 將傳輸資料用此鑰匙加密，Person 2 用此鑰匙解密，解讀訊息

<br />

<img src="/img/symmetric-encryption.png" width="800" />


<br /><br /><br /><br /><br />

這時候，我們傳輸的資料就會是加密過的資訊，駭客就無法輕易解讀了

<img src="/img/unhackable-symmetric-encryption.png" width="800" />


<br /><br />

:::info 為什麼不用 Encode (編碼) 呢？
因為編碼的目的只是將我們的資料轉換成其他語言，
如果駭客知道我們是使用什麼語言，他可以轉換回來，
我們的資料一樣會被看光
:::


:::info 為什麼不用 Hash (雜湊) 呢？
因為雜湊的目的是讓送出方的資料無法被解讀，
這樣的話取得方也沒辦法讀取資料
:::


<br />


### 新問題：Key stolen

但這種方法還是有個小漏洞，那就是

> **當第一次傳輸的鑰匙被偷時，駭客就可以解密了**

<br />



<img src="/img/sym-key-stolen.png" width="650" />

<img src="/img/crack-sym-encrypt.png" width="800" />


<br />
<br />


因此，對於 Sniffing attack，我們僅用對稱加密還是無法完美解決


<br />



## 解方二：Asymmetric encryption (非對稱加密)

因此，為了解決這個問題，我們就有非對稱加密來解決這個問題 <br /><br />

### 原理

1. 我們在接收訊息方 (Person 2) 產生一組 Public key 和 Private key
2. 將 Public key 給傳送訊息方 (Person 1)
3. Person 1 用 Public key 加密資料，到達 Person 2 時在用 Private key 解開

<br />

這樣一來，就只有 Person 2 能看到解密後的資料， <br />
詳細過程如下圖：

<br />

<img src="/img/async-encryption.png" />


<br /><br />


### 完美防禦
這時候，如果有駭客嘗試做 Sniffing attack，會發生什麼事呢？
<br />

如果駭客在 step 2，將我們的 Public key 給偷走


<img src="/img/attack-async-encrypt-1.png" />
<img src="/img/attack-async-encrypt-2.png" />


<br /><br />

當我們在 Step 3 時，我們經 Public key 傳輸的資料，<br />
駭客也沒辦法用它取得的 Public key 解開，這樣就解決問題了


<br />

## 總結

我們在 HTTP 協議上傳輸時，可以利用 **`Asymmetric encryption (非對稱加密)`**，<br />
成功抵擋 **`Sniffing attack (嗅探攻擊)`**


<br />